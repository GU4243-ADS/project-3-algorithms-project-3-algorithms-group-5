---
title: "evaluation"
author: "sile yang"
date: "4/7/2018"
output: html_document
---
```{r}
library(MLmetrics)
```

```{r}
load("/Users/miezai/Documents/GitHub/project-3-algorithms-project-3-algorithms-group-5/data/EM_UI_test.RData")
load("/Users/miezai/Documents/GitHub/project-3-algorithms-project-3-algorithms-group-5/data/MS_UI_test.RData")

load("/Users/miezai/Documents/GitHub/project-3-algorithms-project-3-algorithms-group-5/data/movie_pred.RData")
load("/Users/miezai/Documents/GitHub/project-3-algorithms-project-3-algorithms-group-5/data/MS_pred.RData")

```


### Evaluation 
```{r echo=FALSE, message=FALSE, warning=FALSE}
#select part of matrix
pred <- movie_pred[,1:100]
test <- movie_UI_test[,1:100]

mae <- function(prediction,test_data){
  matrix_mae <- matrix(ncol = 2)
  for (i in 1:nrow(test_data)){
  cols_to_test <- which(!is.na(test_data[i, ]))
  pred  <- prediction[i, ]
  
  mae <- MAE(cols_to_test,pred)
  
  labels <- cbind(i, mae)
  matrix_mae <- rbind(matrix_mae,labels)
  }
  
  matrix_mae <- na.omit(matrix_mae)
  evaluation = sum(matrix_mae[,2])/i
  
  return(evaluation)
}

mae(pred, test)
```

