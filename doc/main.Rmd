---
title: "main"
output: html_document
---

Based on Yang's memory-based code, generating 2 Rdata files(Spearman cor)

### Step 0: Specify directories 
```{r}
library(tidyverse)
source("../lib/functions.R")

MS_train_dir <- "../data/Proj3_Data/MS_sample/data_train.csv"
MS_test_dir <- "../data/Proj3_Data/MS_sample/data_test.csv"
EM_train_dir <- "../data/Proj3_Data/MS_sample/data_train.csv"
EM_test_dir <- "../data/Proj3_Data/MS_sample/data_test.csv"
```

# Step 1: Read in data and transform the data into UI matrix.

```{r}
MS_train <- read.csv(MS_train_dir, as.is = TRUE, header = TRUE)
MS_train <- MS_train[, 2:4]

MS_UI_matrix <- MS_data_transform(MS_train)
save(MS_UI_matrix, file = "../output/MS_UI.RData")

EM_train <- read.csv(EM_train_dir, as.is = TRUE, header = TRUE)
EM_train <- EM_train[, 2:4]

EM_UI_matrix <- movie_data_transform(EM_train)
save(EM_UI_matrix, file = "../output/EM_UI.RData")

```

# Step 2: Model-based Algorithm

# Step 3: Memory-based Algorithm

## Pearson Correlation

```{r}
load("/Users/miezai/Documents/GitHub/project-3-algorithms-project-3-algorithms-group-5/data/Proj3_Data/MS_UI.RData")
load("/Users/miezai/Documents/GitHub/project-3-algorithms-project-3-algorithms-group-5/data/Proj3_Data/EM_UI.RData")
EM_UI_matrix <- as.matrix(movie_UI)
EM_sim <- calc_weight(EM_UI_matrix, method = 'spearman')
save(EM_sim, file = "EM_sim_spearman.RData")
```

```{r}
MS_UI_matrix <- as.matrix(MS_UI)
start.time <- Sys.time()
MS_sim <- calc_weight(MS_UI_matrix, method = 'spearman')
end.time <- Sys.time()
time.taken <- end.time - start.time
time.taken 
save(MS_sim, file = "MS_sim_spearman.RData")
```

